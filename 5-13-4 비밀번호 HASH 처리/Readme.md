# 비밀번호 HASH 처리

* 회원관리 프로그램에서 비밀번호는 hash 처리하여 저장해야 비밀번호의 누출을 막을 수 있다. 
* node red 에서 id와 password를 입력 받아 비밀번호는 hash 처리하여 보관한다.
* 회원 로그인 에서 입력된 비밀번호는 hash 처리하여 DB에 있는 비밀번호와 비교하여 로그인을 결정한다.
```
[{"id":"22b26169.0fd9ae","type":"hash","z":"902ab30a.52d32","name":"","outputvar":"payload","algorithm":"sha512","x":330,"y":100,"wires":[["cdc58f15.ae0bc"]]},{"id":"a3de29b1.665848","type":"inject","z":"902ab30a.52d32","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"str","x":160,"y":100,"wires":[["22b26169.0fd9ae"]]},{"id":"cdc58f15.ae0bc","type":"debug","z":"902ab30a.52d32","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":520,"y":100,"wires":[]},{"id":"3f2a98af.cb7b08","type":"function","z":"902ab30a.52d32","name":"findOne","func":"var email=global.get('email');\nvar newMsg = {};\nnewMsg.collection = 'member';\nnewMsg.operation  = 'findOne';\nnewMsg.payload    = { 'email' : email, 'pw':msg.payload};\nnewMsg.projection = { 'email' : 1 , '_id' : 0 };\nreturn newMsg;\n","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":600,"y":300,"wires":[["c8e660bf.b9a32"]]},{"id":"c8e660bf.b9a32","type":"mongodb2 in","z":"902ab30a.52d32","service":"_ext_","configNode":"8364b0aa.ebd7e","name":"기기 검색","collection":"","operation":"","x":740,"y":300,"wires":[["bd80c7cb.067898"]]},{"id":"d579caf8.b0e198","type":"inject","z":"902ab30a.52d32","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"email\":\"kdi6033@gmail.com\",\"pw\":\"1\"}","payloadType":"json","x":150,"y":200,"wires":[["f8ea3fa7.fb86c"]]},{"id":"9ce9d0a6.4056e","type":"mongodb2 in","z":"902ab30a.52d32","service":"_ext_","configNode":"8364b0aa.ebd7e","name":"등록","collection":"","operation":"","x":790,"y":200,"wires":[[]]},{"id":"b057117c.1c6f3","type":"function","z":"902ab30a.52d32","name":"findOneUpdate","func":"var email=global.get('email');\nvar newMsg = {};\nnewMsg.collection = 'member';\nnewMsg.operation  = 'findOneAndUpdate';\nnewMsg.payload    = [{ 'email' : email}, {$set:{ 'pw':msg.payload}} ];\nnewMsg.projection = { 'email' : 1 , '_id' : 0 };\nreturn newMsg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":612,"y":199,"wires":[["9ce9d0a6.4056e"]]},{"id":"f8ea3fa7.fb86c","type":"function","z":"902ab30a.52d32","name":"","func":"global.set('email',msg.payload.email);\nmsg.payload=msg.payload.pw;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":200,"wires":[["c63308ae.db83c8"]]},{"id":"c63308ae.db83c8","type":"hash","z":"902ab30a.52d32","name":"","outputvar":"payload","algorithm":"sha512","x":450,"y":200,"wires":[["b057117c.1c6f3"]]},{"id":"93b6acb2.b7b61","type":"inject","z":"902ab30a.52d32","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"{\"email\":\"kdi6033@gmail.com\",\"pw\":\"1\"}","payloadType":"json","x":150,"y":300,"wires":[["c75ea49.7c59d58"]]},{"id":"c75ea49.7c59d58","type":"function","z":"902ab30a.52d32","name":"","func":"global.set('email',msg.payload.email);\nmsg.payload=msg.payload.pw;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","libs":[],"x":300,"y":300,"wires":[["7cc0a3c6.8a950c"]]},{"id":"7cc0a3c6.8a950c","type":"hash","z":"902ab30a.52d32","name":"","outputvar":"payload","algorithm":"sha512","x":450,"y":300,"wires":[["3f2a98af.cb7b08"]]},{"id":"bd80c7cb.067898","type":"debug","z":"902ab30a.52d32","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":930,"y":300,"wires":[]},{"id":"8364b0aa.ebd7e","type":"mongodb2","uri":"mongodb://localhost:27000/local","name":"local","options":"","parallelism":"-1"}]
```
